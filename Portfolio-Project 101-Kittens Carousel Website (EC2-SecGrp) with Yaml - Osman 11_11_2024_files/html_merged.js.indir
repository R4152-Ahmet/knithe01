var questionnairePreview;function load(e,t,a){var n=a?"?password="+encodeURIComponent(a):"";$.ajax({url:server+"object/"+t+"/"+e+n,async:!1,type:"GET",dataType:"json",success:function(a){if(a.data){var n={qid:e,courseTitleId:a.data.courseTitleId,courseTitle:a.course?a.course.title:""};if("url"==t)renderPage(a.data.data.link,void 0,n);else if("html"==t)render(a.data.data.html,n);else if("audio"==t)a.data.data.cloudPath?getAudioFileUrl(a.data.data.cloudPath,(e=>renderAudioPlayer(e,a.data.data.duration)),e):a.data.data.url?renderAudioPlayer(a.data.data.url,a.data.data.duration):renderAudioPlayer();else if("slideshow"==t){const t=a.data.data?.slideshowFiles?.[0]?.file;if(!t)return void displayError([{message:"Could not load unit content."}]);window.azureRepo.unlockFile(t).then((t=>{renderPage(`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent(t.data.redirectUrl)}`,n),window.eventBus.$emit("unitLoaded",{unitId:e})})).catch((e=>{displayError([{message:"Could not load unit content."}])}))}else render(a.data.data.embed,n);window.eventBus.$emit("unitLoaded",{unitId:e})}else a.errors&&window.errorsContainsContext(a.errors,"invalid_password")?showMessage("alert","Authentication failed","The password provided was not correct",[{name:"OK"}]):displayError(a.errors)},error:function(e){console.error(e),displayError([{message:"Could not load unit content."}])}})}function render(e,t){if(t||(t={}),""!=e){if(!window.skipEmbedInjections){var a=[{needle:"USERNAME",value:me.username},{needle:"USER_NAME",value:me.username},{needle:"EMAIL",value:me.email},{needle:"USER_EMAIL",value:me.email},{needle:"USERID",value:me.id},{needle:"USER_ID",value:me.id},{needle:"COURSE_ID",value:t.courseTitleId},{needle:"UNIT_ID",value:t.qid}];t.courseTitle&&a.push({needle:"COURSE_TITLE",value:t.courseTitle}),a.forEach((function(t,a,n){for(var i=(e.match(new RegExp("{{"+t.needle+"}}","g"))||[]).length,r=0;r<i;r++)e=e.replace("{{"+t.needle+"}}",t.value)}))}var n=$("#htmlContainer");window.parent.$("#wrapper").is(".white-minimal, .gray-minimal")?n.addClass("white"):n.addClass("black");var i=window.LWYoutubeWrapper.isYoutubeEmbed(e);i&&(e=window.LWYoutubeWrapper.prepareYoutubeEmbed(e)),n.html(e);var r=window.top.topBar&&window.top.topBar.inactivityWatcher||null;if(i){var s=document.querySelector("iframe.js-youtube-embed-iframe");window.LWYoutubeWrapper.wrapFrame(s).then((function(e){e.onPause((function(){r&&r.stopKeepActive(),window.MetricsBeacon.stopContinuousActivityDetected()})),e.onFinish((function(){r&&r.stopKeepActive(),window.MetricsBeacon.stopContinuousActivityDetected()})),e.onPlay((function(){r&&r.keepActive(),window.MetricsBeacon.startContinuousActivityDetected()}))}))}if(window.LWSoundcloudWrapper.isSoundcloudEmbed(e)){var o=n.find("iframe").get(0);window.lwSoundcloudWrapper=new window.LWSoundcloudWrapper(o),window.lwSoundcloudWrapper.onProgress((function(){r?.movementDetectedCallback(),window.top.postMessage({message:"activityDetected"},"*")}))}}else void 0!==window.parent.coursePlayerVue&&showAttachments(window.parent.coursePlayerVue.$store.getCurrentAttachments())}function renderAudioPlayer(e,t){var a=$("#htmlContainer");if(!e||!e.trim().length)return void 0!==window.lw_client&&"5806214e5e4cdefeed8b4567"==window.lw_client&&$(".js-no-audio-message").text("Nossa equipe ainda não finalizou este conteúdo, mas ele estará disponível em breve. Obrigado."),$(".js-fsWrapper").show(),void a.hide();$(".js-fsWrapper").hide();var n=window.parent.$("#wrapper.path-player-init"),i=a.find("#blackAudio");n.hasClass("white-minimal")||n.hasClass("gray-minimal")?(a.addClass("white"),$(".audio-loader-wrapper").addClass("white-loader"),i=a.find("#whiteAudio")):(a.addClass("black"),i=a.find("#blackAudio")),window.eventBus.$emit("initAudioPlayer",{$htmlContainer:a,$colors:i,url:e,duration:t||0})}function renderPage(e,t,a){a||(a={}),void 0===t&&(t=function(){}),e&&(e=(e=(e=(e=(e=(e=(e=e.replace("{{USERNAME}}",window.encodeURIComponent(window.me.username))).replace("{{USER_NAME}}",window.encodeURIComponent(window.me.username))).replace("{{EMAIL}}",window.encodeURIComponent(window.me.email))).replace("{{USER_EMAIL}}",window.encodeURIComponent(window.me.email))).replace("{{USERID}}",window.encodeURIComponent(window.me.id))).replace("{{USER_ID}}",window.encodeURIComponent(window.me.id))).replace("{{COURSE_ID}}",window.encodeURIComponent(a.courseTitleId)),a.courseTitle&&(e=e.replace("{{COURSE_TITLE}}",window.encodeURIComponent(a.courseTitle))),a.qid&&(e=e.replace("{{UNIT_ID}}",window.encodeURIComponent(a.qid))));var n=document.createElement("iframe");n.setAttribute("id","iframePage"),n.onload=t,n.className="fullScreenIframe",n.style.margin="0",$("#htmlContainer").css({position:"absolute",width:"100%",height:"100%",border:"0px"}).append($(n)),$("#iframePage").attr("src",e);var i=document.querySelector("#iframePage"),r={webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",allow:"autoplay; microphone;"};for(var s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s])}function showAttachments(e){var t=["doc","docx","file","html","icon","image","pdf","ppt","pptx","xls","xlsx","zip"];if(e&&e.length>0){$attachmentsWrapper=$("#htmlContainer"),$(document.createElement("H1")).text("Study the following:").addClass("study-title").appendTo($attachmentsWrapper);for(var a=0;a<e.length;a++){var n=copyJson(e[a]);-1===t.indexOf(n.extension)&&(n.extension="file"),$attachmentsWrapper.append($("#attachmentTemplate").render(n))}$attachmentsWrapper.find(".js-assessment-link").off("click").on("click",(function(e){e.preventDefault();var t=$(this),a=window.server+"unlock/attachment/"+t.attr("href")+"?json";t.addClass("disabled"),$.ajax({url:a,async:!1,type:"GET",dataType:"json",success:function(e){t.removeClass("disabled"),window.open(e.redirectUrl)},error:function(e){t.removeClass("disabled"),console.error(e)}})}))}}function ui_init(){var e,t;$("#htmlContainer").children().length&&"IFRAME"==$("#htmlContainer").children().eq(0).prop("tagName").toUpperCase()&&($("#htmlContainer").addClass("fullScreen"),$("body").css("background-color","black"),(e=(t=$("#htmlContainer").children().eq(0)).width()/t.height())>getViewPortWidth()/getViewPortHeight()?(t.css({width:getViewPortWidth()-20,height:(getViewPortWidth()-20)/e}),$("#htmlContainer").css("padding","10px")):t.css({width:(getViewPortHeight()-20)*e,height:getViewPortHeight()-20}))}function initInterface(){checkAudioAndEnableSeek()}function checkAudioAndEnableSeek(){if("/html"===document.location.pathname&&$.getURLvar("objectType")&&"audio"===$.getURLvar("objectType"))var e=window.setInterval((function(){var t=document.querySelector("audio"),a=document.querySelector(".scrubber");a&&t&&t.duration&&(createAudioSeekListener(t,a),window.clearInterval(e))}),2e3)}function createAudioSeekListener(e,t){if(t){var a=t.clientWidth,n=0,i=e.duration,r=0;$(t).off("click.seekT").on("click.seekT",(function(t){t.offsetX&&(n=100*t.offsetX/a),(n=(n=n<=1?0:n)>=99?99:n)&&(r=i*n/100,e.currentTime=r)}))}}!function(e,t,a){var n,i=window.imagePath+"/components/audiojs/";a[e]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+e+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+e+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:i+"player-graphics.gif",swfLocation:i+"audiojs.swf",useFlash:(n=document.createElement("audio"),!(n.canPlayType&&n.canPlayType("audio/mpeg;").replace(/no/,""))),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var e=navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin}try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(){},flashError:function(){var t=this.settings.createPlayer,n=r(t.errorMessageClass,this.wrapper),i='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';this.mp3&&(i+=' <a href="'+this.mp3+'">Download audio file</a>.'),a[e].helpers.removeClass(this.wrapper,t.loadingClass),a[e].helpers.addClass(this.wrapper,t.errorClass),n.innerHTML=i},loadError:function(){var t=this.settings.createPlayer,n=r(t.errorMessageClass,this.wrapper);a[e].helpers.removeClass(this.wrapper,t.loadingClass),a[e].helpers.addClass(this.wrapper,t.errorClass),n.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){a[e].helpers.addClass(this.wrapper,this.settings.createPlayer.loadingClass)},loadStarted:function(){var t=this.settings.createPlayer,n=r(t.durationClass,this.wrapper),i=Math.floor(this.duration/60),s=Math.floor(this.duration%60);a[e].helpers.removeClass(this.wrapper,t.loadingClass),n.innerHTML=(i<10?"0":"")+i+":"+(s<10?"0":"")+s},loadProgress:function(e){var t=this.settings.createPlayer,a=r(t.scrubberClass,this.wrapper);r(t.loaderClass,this.wrapper).style.width=a.offsetWidth*e+"px"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){a[e].helpers.addClass(this.wrapper,this.settings.createPlayer.playingClass)},pause:function(){a[e].helpers.removeClass(this.wrapper,this.settings.createPlayer.playingClass)},updatePlayhead:function(e){var t=this.settings.createPlayer,a=r(t.scrubberClass,this.wrapper);r(t.progressClass,this.wrapper).style.width=a.offsetWidth*e+"px",t=r(t.playedClass,this.wrapper),a=this.duration*e,e=Math.floor(a/60),a=Math.floor(a%60),t.innerHTML=(e<10?"0":"")+e+":"+(a<10?"0":"")+a}},create:function(e,t){return t=t||{},e.length?this.createAll(t,e):this.newInstance(e,t)},createAll:function(e,t){var a=t||document.getElementsByTagName("audio"),n=[];e=e||{};for(var i=0,r=a.length;i<r;i++)n.push(this.newInstance(a[i],e));return n},newInstance:function(e,n){var i=this.helpers.clone(this.settings),r="audiojs"+this.instanceCount,s="audiojs_wrapper"+this.instanceCount;return this.instanceCount++,null!=e.getAttribute("autoplay")&&(i.autoplay=!0),null!=e.getAttribute("loop")&&(i.loop=!0),"none"==e.getAttribute("preload")&&(i.preload=!1),n&&this.helpers.merge(i,n),i.createPlayer.markup?e=this.createPlayer(e,i.createPlayer,s):e.parentNode.setAttribute("id",s),s=new a[t](e,i),i.css&&this.helpers.injectCss(s,i.css),i.useFlash&&i.hasFlash?(this.injectFlash(s,r),this.attachFlashEvents(s.wrapper,s)):i.useFlash&&!i.hasFlash&&this.settings.flashError.apply(s),(!i.useFlash||i.useFlash&&i.hasFlash)&&this.attachEvents(s.wrapper,s),this.instances[r]=s},createPlayer:function(e,t,a){var n=document.createElement("div"),i=e.cloneNode(!0);return n.setAttribute("class","audiojs"),n.setAttribute("className","audiojs"),n.setAttribute("id",a),i.outerHTML&&!document.createElement("audio").canPlayType?(i=this.helpers.cloneHtml5Node(e),n.innerHTML=t.markup,n.appendChild(i),e.outerHTML=n.outerHTML,n=document.getElementById(a)):(n.appendChild(i),n.innerHTML+=t.markup,e.parentNode.replaceChild(n,e)),n.getElementsByTagName("audio")[0]},attachEvents:function(t,n){if(n.settings.createPlayer){var i=n.settings.createPlayer,s=r(i.playPauseClass,t),o=r(i.scrubberClass,t);a[e].events.addListener(s,"click",(function(){n.playPause.apply(n)})),a[e].events.addListener(o,"click",(function(e){e=e.clientX;var t=this,a=0;if(t.offsetParent)do{a+=t.offsetLeft}while(t=t.offsetParent);n.skipTo((e-a)/o.offsetWidth)})),n.settings.useFlash||(a[e].events.trackLoadProgress(n),a[e].events.addListener(n.element,"timeupdate",(function(){n.updatePlayhead.apply(n)})),a[e].events.addListener(n.element,"ended",(function(){n.trackEnded.apply(n)})),a[e].events.addListener(n.source,"error",(function(){clearInterval(n.readyTimer),clearInterval(n.loadTimer),n.settings.loadError.apply(n)})))}},attachFlashEvents:function(e,t){t.swfReady=!1,t.load=function(e){t.mp3=e,t.swfReady&&t.element.load(e)},t.loadProgress=function(e,a){t.loadedPercent=e,t.duration=a,t.settings.loadStarted.apply(t),t.settings.loadProgress.apply(t,[e])},t.skipTo=function(e){e>t.loadedPercent||(t.updatePlayhead.call(t,[e]),t.element.skipTo(e))},t.updatePlayhead=function(e){t.settings.updatePlayhead.apply(t,[e])},t.play=function(){t.settings.preload||(t.settings.preload=!0,t.element.init(t.mp3)),t.playing=!0,t.element.pplay(),t.settings.play.apply(t)},t.pause=function(){t.playing=!1,t.element.ppause(),t.settings.pause.apply(t)},t.setVolume=function(e){t.element.setVolume(e)},t.loadStarted=function(){t.swfReady=!0,t.settings.preload&&t.element.init(t.mp3),t.settings.autoplay&&t.play.apply(t)}},injectFlash:function(e,t){var a=this.flashSource.replace(/\$1/g,t);a=(a=a.replace(/\$2/g,e.settings.swfLocation)).replace(/\$3/g,+new Date+Math.random());var n=e.wrapper.innerHTML,i=document.createElement("div");i.innerHTML=a+n,e.wrapper.innerHTML=i.innerHTML,e.element=this.helpers.getSwf(t)},helpers:{merge:function(e,t){for(attr in t)(e.hasOwnProperty(attr)||t.hasOwnProperty(attr))&&(e[attr]=t[attr])},clone:function(e){if(null==e||"object"!=typeof e)return e;var t,a=new e.constructor;for(t in e)a[t]=arguments.callee(e[t]);return a},addClass:function(e,t){RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," ")},injectCss:function(e,t){for(var a="",n=document.getElementsByTagName("style"),i=t.replace(/\$1/g,e.settings.imageLocation),r=0,s=n.length;r<s;r++){var o=n[r].getAttribute("title");if(o&&~o.indexOf("audiojs")){if((s=n[r]).innerHTML===i)return;a=s.innerHTML;break}}r=(n=document.getElementsByTagName("head")[0]).firstChild,s=document.createElement("style"),n&&(s.setAttribute("type","text/css"),s.setAttribute("title","audiojs"),s.styleSheet?s.styleSheet.cssText=a+i:s.appendChild(document.createTextNode(a+i)),r?n.insertBefore(s,r):n.appendChild(styleElement))},cloneHtml5Node:function(e){var t=document.createDocumentFragment(),a=t.createElement?t:document;return a.createElement("audio"),a=a.createElement("div"),t.appendChild(a),a.innerHTML=e.outerHTML,a.firstChild},getSwf:function(e){return(e=document[e]||window[e]).length>1?e[e.length-1]:e}},events:{memoryLeaking:!1,listeners:[],addListener:function(t,n,i){t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&(this.listeners.push(t),this.memoryLeaking||(window.attachEvent("onunload",(function(){if(this.listeners)for(var t=0,n=this.listeners.length;t<n;t++)a[e].events.purge(this.listeners[t])})),this.memoryLeaking=!0),t.attachEvent("on"+n,(function(){i.call(t,window.event)})))},trackLoadProgress:function(e){if(e.settings.preload){var t,a,n=/(ipod|iphone|ipad)/i.test(navigator.userAgent);t=setInterval((function(){e.element.readyState>-1&&(n||e.init.apply(e)),e.element.readyState>1&&(e.settings.autoplay&&e.play.apply(e),clearInterval(t),a=setInterval((function(){e.loadProgress.apply(e),e.loadedPercent>=1&&clearInterval(a)})))}),10),e.readyTimer=t,e.loadTimer=a}},purge:function(e){var t,a=e.attributes;if(a)for(t=0;t<a.length;t+=1)"function"==typeof e[a[t].name]&&(e[a[t].name]=null);if(a=e.childNodes)for(t=0;t<a.length;t+=1)purge(e.childNodes[t])},ready:function(e){var t=window,a=!1,n=!0,i=t.document,r=i.documentElement,s=i.addEventListener?"addEventListener":"attachEvent",o=i.addEventListener?"removeEventListener":"detachEvent",l=i.addEventListener?"":"on",d=function(n){"readystatechange"==n.type&&"complete"!=i.readyState||(("load"==n.type?t:i)[o](l+n.type,d,!1),!a&&(a=!0)&&e.call(t,n.type||n))},p=function(){try{r.doScroll("left")}catch(e){return void setTimeout(p,50)}d("poll")};if("complete"==i.readyState)e.call(t,"lazy");else{if(i.createEventObject&&r.doScroll){try{n=!t.frameElement}catch(e){}n&&p()}i[s](l+"DOMContentLoaded",d,!1),i[s](l+"readystatechange",d,!1),t[s](l+"load",d,!1)}}}},a[t]=function(e,t){var a,n;this.element=e,this.wrapper=e.parentNode,this.source=e.getElementsByTagName("source")[0]||e,this.mp3=(n=(a=e).getElementsByTagName("source")[0],a.getAttribute("src")||(n?n.getAttribute("src"):null)),this.settings=t,this.loadStartedCalled=!1,this.loadedPercent=0,this.duration=1,this.playing=!1},a[t].prototype={updatePlayhead:function(){this.settings.updatePlayhead.apply(this,[this.element.currentTime/this.duration])},skipTo:function(e){e>this.loadedPercent||(this.element.currentTime=this.duration*e,this.updatePlayhead())},load:function(t){this.loadStartedCalled=!1,this.source.setAttribute("src",t),this.element.load(),this.mp3=t,a[e].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){if(!this.element.duration)return!1;this.duration=this.element.duration,this.updatePlayhead(),this.settings.loadStarted.apply(this)},loadProgress:function(){null!=this.element.buffered&&this.element.buffered.length&&(this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted()),this.loadedPercent=this.element.buffered.end(this.element.buffered.length-1)/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent]))},playPause:function(){this.playing?this.pause():this.play()},play:function(){/(ipod|iphone|ipad)/i.test(navigator.userAgent)&&0==this.element.readyState&&this.init.apply(this),this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),a[e].events.trackLoadProgress(this)),this.playing=!0,this.element.play(),this.settings.play.apply(this)},pause:function(){this.playing=!1,this.element.pause(),this.settings.pause.apply(this)},setVolume:function(e){this.element.volume=e},trackEnded:function(){this.skipTo.apply(this,[0]),this.settings.loop||this.pause.apply(this),this.settings.trackEnded.apply(this)}};var r=function(e,t){var a=[];if((t=t||document).getElementsByClassName)a=t.getElementsByClassName(e);else{var n,i,r=t.getElementsByTagName("*"),s=RegExp("(^|\\s)"+e+"(\\s|$)");for(n=0,i=r.length;n<i;n++)s.test(r[n].className)&&a.push(r[n])}return a.length>1?a:a[0]}}("audiojs","audiojsInstance",this),$(document).ready((function(){var e=$.getURLvar("qid"),t=$.getURLvar("objectType"),a=$.getURLvar("password");isLoadedInIframe("learnworlds")?(load(e,t,a),ui_init(),$(window).resize((function(){ui_init()})),initInterface()):window.location.href="/path-player?courseid="+$.getURLvar("courseid")+"&unit="+e+"Unit"}));